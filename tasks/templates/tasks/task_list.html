<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCgk4FwQ_wU1idbLyAESzmPfiOjrqhWAI4&libraries=places"></script>
    <script>
        function initAutocomplete() {
            var input = document.getElementById('autocomplete');
            var options = {
            types: ['geocode'], 
            componentRestrictions: { country: 'US' }
            };

            var autocomplete = new google.maps.places.Autocomplete(input, options);
        }

        google.maps.event.addDomListener(window, 'load', initAutocomplete);
    </script>    
        
</head>

<body>
    <div class="w-100 h-100 bg-white-200 flex items-center justify-center">
        <div class="w-3/4 h-3/4 bg-white p-4 rounded-lg flex flex-col items-center">
            <!--Title for the page-->
            <div class="mt-4 mb-6"> 
                <strong class="text-lg">Plan a new trip</strong><br>
            </div>

            <!-- Form for adding new tasks -->
            <div class="space-y-2"> 
                <form method="post" action="{% url 'create_task' %}">
                    {% csrf_token %}
                    <div class="mb-2">
                        <input type="text" name="title" id="autocomplete" placeholder="Trip Name" required class="w-60 h-8 border border-grey rounded p-1">
                    </div>
                    <div class="mb-2">
                        <input type="date" name="date" placeholder="Enter date" required class="w-60 h-8 border border-grey rounded p-1">
                    </div>
                    <div class="mb-2">
                        <input type="time" name="start_time" placeholder="Time to start" required class="w-60 h-8 border border-grey rounded p-1">
                    </div>
                    <div class="mb-2">
                        <input type="time" name="end_time" placeholder="End Time" class="w-60 h-8 border border-grey rounded p-1">
                    </div>
                    <div class="mb-2">
                        <button type="submit" class="w-60 h-8 bg-green-200 border border-white rounded-full p-1"> Start planning </button>
                    </div>
                </form>
            </div>    

            <!-- Display the list of tasks -->
            <ul>
                {% for task in tasks %}
                    <li class="mt-5 mb-5">
                        <div p class="text underline"></p>
                            <a href="{% url 'task_detail' task.id %}"><strong>{{ task.title }}</strong></a><br>
                        </div>
                        {% if task.date %}
                            Date: {{ task.date }}<br>
                        {% endif %}
                        <form method="post" action="{% url 'delete_task' task.id %}">
                            {% csrf_token %}
                            <button type="submit" class="text-red-500 underline">Delete</button>
                        </form>
                    </li>
                {% endfor %} 
            </ul>


            {% comment %} Button Next Page {% endcomment %}
            <div p class="text-blue-500 underline"></p>
                <a href="{% url 'hello_world' %}" class="btn btn-primary"> Next Page</a>
            </div>
        </div>
    </div>
</body>